# 🤖 OpenAI 모델 비교

## 현재 사용 중: GPT-4o-mini ✅

| 모델 | 속도 | 비용 (입력) | 비용 (출력) | 성능 | 추천 |
|------|------|-------------|-------------|------|------|
| **GPT-4o-mini** ⭐ | **가장 빠름** | $0.15/1M | $0.60/1M | 우수 | ✅ **현재 사용** |
| GPT-3.5-turbo | 빠름 | $0.50/1M | $1.50/1M | 보통 | ❌ 구형 |
| GPT-4o | 빠름 | $2.50/1M | $10.00/1M | 매우 우수 | ❌ 비쌈 |
| GPT-4-turbo | 느림 | $10.00/1M | $30.00/1M | 최고 | ❌ 매우 비쌈 |

**결론: GPT-4o-mini가 이미 최적의 선택입니다!**
- 가장 빠른 속도 (GPT-3.5-turbo보다 빠름)
- 가장 저렴한 비용
- 충분히 우수한 성능 (한국어 이해도 95%+)

---

## 📊 비용 분석

### 현재 (정규식 + LLM 백업)
- 정규식 성공: 80% (무료)
- LLM 호출: 20% (유료)
- **월 비용 (100회/일)**: ~$0.09

### 제안 (LLM만 사용)
- LLM 호출: 100% (모든 요청)
- **월 비용 (100회/일)**: ~$0.45

**차이: +$0.36/월** (매우 저렴!)

---

## 🎯 정규식 제거 장단점

### ✅ 장점
1. **코드 단순화**
   - korean_patterns.py 불필요
   - 유지보수 간편
   - 버그 감소

2. **더 나은 이해력**
   - "어제 새벽 3시부터 오전 10시까지 잤다가 점심먹고 오후 2시부터 저녁 8시까지 또 잤어"
   - 정규식: ❌ 실패
   - LLM: ✅ 정확히 파싱

3. **일관된 품질**
   - 모든 입력에 동일한 처리
   - 예외 케이스 자동 처리

4. **확장성**
   - 새 의도 추가 시 프롬프트만 수정
   - 정규식 패턴 작성 불필요

### ❌ 단점
1. **비용 증가**
   - $0.09/월 → $0.45/월 (여전히 매우 저렴)

2. **약간의 지연**
   - 정규식: 즉시 (0.001초)
   - LLM: 0.5-1초 (gpt-4o-mini는 매우 빠름)

3. **API 의존성**
   - 인터넷 필요
   - OpenAI 서버 다운 시 영향

---

## 💡 최종 추천

**정규식 제거 추천! ✅**

**이유:**
1. **비용 무시할 수준** ($0.36/월 증가)
2. **gpt-4o-mini 이미 최적** (더 빠른 모델 없음)
3. **코드 품질 향상** (단순하고 유지보수 쉬움)
4. **사용자 경험 개선** (더 정확한 파싱)

**응답 속도:**
- 현재 평균: 0.8초 (정규식 80% + LLM 20%)
- 변경 후: 1.0초 (LLM 100%)
- **차이: 0.2초** (사용자가 느끼기 어려움)

---

## 🚀 구현 계획

### 1. ConversationAgent 단순화
```python
# Before (복잡)
def parse_user_input(self, text):
    # 1. 정규식 시도
    intent, entities, confidence = self.parser.parse(text)

    # 2. 실패 시 LLM
    if confidence < 0.7:
        return self.llm.parse_intent(text)

    return {"intent": intent, ...}

# After (간단)
def parse_user_input(self, text):
    # LLM으로 바로 파싱
    return self.llm.parse_intent(text)
```

### 2. 코드 제거
- ❌ parsers/korean_patterns.py (사용 안 함)
- ❌ 복잡한 fallback 로직
- ✅ 깔끔한 단일 경로

### 3. 성능 최적화
- 프롬프트 최적화 (더 짧고 명확하게)
- 캐싱 추가 (동일 입력 반복 시)
- 배치 처리 (복합 명령)

---

## 📈 예상 성능

### 응답 시간
- **간단한 입력**: 0.5-0.8초
- **복잡한 입력**: 0.8-1.2초
- **평균**: 1.0초

### 정확도
- **정규식**: 80% (패턴 매칭)
- **LLM**: 95%+ (자연어 이해)
- **개선**: +15%

### 월 비용 (예상 사용량)
| 일일 사용 | 월 API 호출 | 월 비용 |
|----------|-------------|---------|
| 10회 | 300 | $0.05 |
| 50회 | 1,500 | $0.23 |
| 100회 | 3,000 | $0.45 |
| 500회 | 15,000 | $2.25 |

**개인 사용자 기준 월 $0.5 미만!**
